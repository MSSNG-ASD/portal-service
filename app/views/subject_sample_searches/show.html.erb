<div class="row">
  <div class="col">
    <h1 class="title"><%= dt("#{controller_name}.#{action_name}.title", model: dt("#{controller_name}.#{action_name}.model"), instance: @subject_sample_search.name).html_safe %></h1>
  </div>
</div>
<div class="row">
  <div class="col-md-3 query-tools">
    <%= simple_form_for @subject_sample_search do |f| %>
      <div class="form-inputs">
        <%= f.input :name, label: SubjectSampleSearch.human_attribute_name(:saved_name), autofocus: true %>
        <%= f.input :saved, as: :hidden, input_html: { value: true } %>
      </div>

      <div class="form-actions primary">
        <%= f.button :submit, class: 'btn btn-primary', value: dt("#{controller_name}.#{action_name}.submit", model: dt("#{controller_name}.#{action_name}.model")) %>
      </div>

      <div class="form-actions modifiers">
        You can also...
        <%= link_to 'Edit this query', edit_subject_sample_search_path(@subject_sample_search), class: 'btn btn-secondary' %>
        <%= link_to 'Delete this query', subject_sample_search_path(@subject_sample_search), class: 'btn btn-danger', method: :delete, data: { confirm: dt("#{controller_name}.#{action_name}.confirm", model: @subject_sample_search.name) } %>
      </div>
    <% end %>
  </div>
  <div class="col-md-9 query-result">
    <table id="datatable_all" class="table table-striped table-bordered">
      <thead>
        <tr>
          <th><%= SubjectSample.human_attribute_name(:indexid) %></th>
          <th><%= SubjectSample.human_attribute_name(:submittedid) %></th>
          <th><%= SubjectSample.human_attribute_name(:dnasource) %></th>
          <th><%= SubjectSample.human_attribute_name(:platform) %></th>
          <th><%= SubjectSample.human_attribute_name(:igv) %></th>
        </tr>
      </thead>
      <tbody>
        <% @subject_sample_search.results.each do |subject_sample| %>
          <tr>
            <td><%= link_to subject_sample.send('indexid'), subject_sample_path(subject_sample.send('indexid'), sample: subject_sample.send('submittedid')) %></td>
            <td><%= subject_sample.send('submittedid') %></td>
            <td><%= subject_sample.send('dnasource') %></td>
            <td><%= subject_sample.send('platform') %></td>
            <td>
              <%= link_to(
                content_tag(
                  :span, "",
                  :class => "fa fa-file-image-o",
                  :id => "igv-#{subject_sample.id}"
                ),
                igv_subject_sample_path(
                  subject_sample.send('submittedid'),
                  locus: "2:50170604-50171257",
                  platform: subject_sample.platform
                ),
                :class => 'btn btn-small btn-primary btn-xs'
              ) %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
