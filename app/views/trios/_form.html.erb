<%= simple_form_for @trio do |f| %>
  <div class="form-inputs">
    <%= f.input :name, :placeholder => f.object.class.human_attribute_name(:name), :autofocus => true %>

    <fieldset class="section">
      <legend><%=f.object.class.human_attribute_name(:subject_title)%></legend>

      <%= f.input :stringy_index_ids, input_html: {class: 'ajax-multi-select2', data: {records: f.object.subject, url: subject_selections_path, multiple: false, minimum: 3, placeholder: f.object.class.human_attribute_name(:index_ids_placeholder)}} %>
    </fieldset>

    <fieldset class="section">
      <legend><%=f.object.class.human_attribute_name(:genes_title)%></legend>

      <fieldset>
        <legend><%=f.object.class.human_attribute_name(:accordion_file_title)%></legend>

        <%= f.input :uploaded_gene_file, :as => :file, hint: Trio.human_attribute_name(:file_hint) %>
        <%#= link_to 'TCAG Autism Risk Genes', '/risk_genes.txt', download: 'data', target: "_blank"%>
      </fieldset>

      <fieldset>
        <legend><%=f.object.class.human_attribute_name(:accordion_gene_title)%></legend>

        <%= f.input :stringy_gene_ids, input_html: {class: 'ajax-multi-select2', data: {records: f.object.genes, url: gene_selections_path, multiple: true, minimum: 2, placeholder: f.object.class.human_attribute_name(:gene_ids_placeholder)}} %>
      </fieldset>
    </fieldset>

    <fieldset class="section">
      <legend><%=f.object.class.human_attribute_name(:filter_title)%></legend>

      <fieldset>
        <legend><%=f.object.class.human_attribute_name(:accordion_significance_title)%></legend>

        <div class="row">
          <div class="col-md-4">
            <%= f.input :frequency_operator, prompt: f.object.class.human_attribute_name(:frequency_operator), collection: [["<", "<"], ["<=", "<="]], label_method: :last, value_method: :first  %>
          </div>
          <div class="col-md-4">
            <%= f.input :frequency, as: :float %>
          </div>
          <div class="col-md-4">
            <%= f.input :zygosity, prompt: f.object.class.human_attribute_name(:zygosity), collection: ['homo/hemizygous', 'heterozygous'] %>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <%= f.input :effects, label_html: {rel: 'popover', data: {content: dt('popovers.effects'), html: true, trigger: 'hover', toggle: 'popover', placement: 'right'}}, collection: VariantSearch::EFFECTS.invert.to_a, input_html: {class: 'select2', multiple: "multiple", data: {placeholder: f.object.class.human_attribute_name(:effects_placeholder)}} %>
          </div>
          <div class="col-md-4">
            <%= f.input :impacts, label_html: {rel: 'popover', data: {content: dt('popovers.impacts'), html: true, trigger: 'hover', toggle: 'popover', placement: 'right'}}, collection: VariantSearch::IMPACTS.invert.to_a, input_html: {class: 'select2', multiple: "multiple", data: {placeholder: f.object.class.human_attribute_name(:impacts_placeholder)}} %>
          </div>
          <div class="col-md-4">
            <%= f.input :paths, label_html: {rel: 'popover', data: {content: dt('popovers.paths'), html: true, trigger: 'hover', toggle: 'popover', placement: 'right'}}, collection: VariantSearch::PATHS.invert.to_a, input_html: {class: 'select2', multiple: "multiple", data: {placeholder: f.object.class.human_attribute_name(:paths_placeholder)}} %>
          </div>
        </div>
    </fieldset>
  </div>

  <div class="form-actions">
    <%= f.button :submit, :class => 'btn btn-primary', :value => dt("#{controller_name}.#{action_name}.submit", :model => dt("#{controller_name}.#{action_name}.model")) %>
    <%= link_to dt('actions.cancel'), (@trio.id ? @trio : search_trios_path), :class => 'btn' %>
  </div>
<% end %>
